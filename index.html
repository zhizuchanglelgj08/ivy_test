<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>购物车</title>
  </head>
  <style>
    /* 谷歌 */
    input::-webkit-outer-spin-button,
    input::-webkit-inner-spin-button {
      -webkit-appearance: none;
      appearance: none;
      margin: 0;
    }
    /* 火狐 */
    input {
      -moz-appearance: textfield;
    }
    .msgCode input {
      width: 20px;
    }
    .codeMask {
      position: absolute;
      width: 130px;
      height: 25px;
      background-color: rgba(0, 0, 0, 0.2);
    }
  </style>
  <body>
    <script src="vue.js"></script>
    <!-- 宿主文件 -->
    <div id="app">
      <h2 :title="title">
        <!-- 插值文本 -->
        {{title}}
      </h2>
      <!-- 用户输入 -->
      <p>
        <input
          type="text"
          v-model.number="course"
          v-on:keydown.enter="addCourse"
        />{{course}}
        <button @click="addCourse">新增</button>
      </p>

      <!-- 列表渲染 -->
      <div v-for="item in courses" :key="item">
        {{item}}
      </div>
      <!-- 商品总数 -->
      <P>
        <!-- 表达式 -->
        <!-- 课程总数：{{total}} 计算属性-->
        课程总数：{{totalCount}} 
      </P>
    </div>
    <script>
      // 1.创建Vue实例
      const app = new Vue({
        el: "#app",
        computed: {
            //计算属性具有缓存性，如果值没有发生变化，则页面不会重新渲染
            total() {
                return this.courses.length + '门' 
            }
        },
        // watch: {//默认情况下watcher初始化时，不执行
        //     courses(newValue, oldValue) {
        //         this.totalCount = newValue.length + '门'
        //     }
        // },
        watch: {
            courses: {
                immediate: true,//立即执行一次
                deep: true,//深度监控
                handler(newValue, oldValue) {
                    this.totalCount = newValue.length + '门'
                }
            }
        },
        data() {
          return {
            title: "hello,vue!",
            courses: ["web全栈", "web高级"],
            course: "",
            totalCount:''
          };
        },
        methods: {
          addCourse() {
            this.courses.push(this.course);
            this.course = "";
          },
        },
      });
      setTimeout(function () {
        app.title = "mua~,vue!";
      }, 5000);
    </script>
  </body>
</html>

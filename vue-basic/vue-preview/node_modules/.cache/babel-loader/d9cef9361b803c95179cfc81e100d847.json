{"remainingRequest":"/Users/ivy/Desktop/codeProject/hellovue/vue-basic/vue-preview/node_modules/babel-loader/lib/index.js!/Users/ivy/Desktop/codeProject/hellovue/vue-basic/vue-preview/node_modules/eslint-loader/index.js??ref--13-0!/Users/ivy/Desktop/codeProject/hellovue/vue-basic/vue-preview/src/store/plugins/persist.js","dependencies":[{"path":"/Users/ivy/Desktop/codeProject/hellovue/vue-basic/vue-preview/src/store/plugins/persist.js","mtime":1597394155830},{"path":"/Users/ivy/Desktop/codeProject/hellovue/vue-basic/vue-preview/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ivy/Desktop/codeProject/hellovue/vue-basic/vue-preview/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ivy/Desktop/codeProject/hellovue/vue-basic/vue-preview/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:ZXhwb3J0IGRlZmF1bHQgKGZ1bmN0aW9uIChzdG9yZSkgewogIC8vIHN0b3Jl5Yid5aeL5YyW55qE5pe25YCZ77yM5bCG5a2Y5YKo5ZyobG9jYWxTdG9yZWFnZeS4reeahOeKtuaAgei/mOWOnwogIGlmIChsb2NhbFN0b3JhZ2UpIHsKICAgIHZhciB1c2VyID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpKTsKCiAgICBpZiAodXNlcikgewogICAgICBzdG9yZS5jb21taXQoJ3VzZXIvbG9naW4nLCB1c2VyLnVzZXJuYW1lKTsKICAgIH0KCiAgICBjb25zb2xlLmxvZygxKTsKICB9IC8vIOWmguaenOeUqOaIt+ebuOWFs+eKtuaAgeWPkeeUn+WPmOWMlu+8jOiHquWKqOWtmOWFpWxvY2FsU3RvcmVhZ2UKCgogIHN0b3JlLnN1YnNjcmliZShmdW5jdGlvbiAobXV0YXRpb24sIHN0YXRlKSB7CiAgICAvLyB7dHlwZTondXNlci9sb2dpbid9CiAgICAvLyB7dHlwZTondXNlci9sb2dvdXQnfQogICAgLy8ge3R5cGU6J2NhcnQvYWRkQ2FydCd9CiAgICBpZiAobXV0YXRpb24udHlwZSA9PT0gJ3VzZXIvbG9naW4nKSB7CiAgICAgIHZhciBfdXNlciA9IEpTT04uc3RyaW5naWZ5KHN0YXRlLnVzZXIpOwoKICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBfdXNlcik7CiAgICB9IGVsc2UgaWYgKG11dGF0aW9uLnR5cGUgPT09ICd1c2VyL2xvZ291dCcpIHsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXInKTsKICAgIH0KCiAgICBjb25zb2xlLmxvZygyKTsKICB9KTsKfSk7"},{"version":3,"sources":["/Users/ivy/Desktop/codeProject/hellovue/vue-basic/vue-preview/src/store/plugins/persist.js"],"names":["store","localStorage","user","JSON","parse","getItem","commit","username","console","log","subscribe","mutation","state","type","stringify","setItem","removeItem"],"mappings":"AAAA,gBAAe,UAAAA,KAAK,EAAI;AACtB;AACA,MAAIC,YAAJ,EAAkB;AAChB,QAAMC,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACI,OAAb,CAAqB,MAArB,CAAX,CAAb;;AACA,QAAIH,IAAJ,EAAU;AACRF,MAAAA,KAAK,CAACM,MAAN,CAAa,YAAb,EAA2BJ,IAAI,CAACK,QAAhC;AACD;;AACDC,IAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AACD,GARqB,CAUtB;;;AACAT,EAAAA,KAAK,CAACU,SAAN,CAAgB,UAACC,QAAD,EAAWC,KAAX,EAAqB;AACnC;AACA;AACA;AACA,QAAGD,QAAQ,CAACE,IAAT,KAAkB,YAArB,EAAmC;AACjC,UAAMX,KAAI,GAAGC,IAAI,CAACW,SAAL,CAAeF,KAAK,CAACV,IAArB,CAAb;;AACAD,MAAAA,YAAY,CAACc,OAAb,CAAqB,MAArB,EAA6Bb,KAA7B;AACD,KAHD,MAGO,IAAIS,QAAQ,CAACE,IAAT,KAAkB,aAAtB,EAAqC;AAC1CZ,MAAAA,YAAY,CAACe,UAAb,CAAwB,MAAxB;AACD;;AACDR,IAAAA,OAAO,CAACC,GAAR,CAAY,CAAZ;AACD,GAXD;AAYD,CAvBD","sourcesContent":["export default store => {\n  // store初始化的时候，将存储在localStoreage中的状态还原\n  if (localStorage) {\n    const user = JSON.parse(localStorage.getItem('user'))\n    if (user) {\n      store.commit('user/login', user.username)\n    }\n    console.log(1)\n  }\n\n  // 如果用户相关状态发生变化，自动存入localStoreage\n  store.subscribe((mutation, state) => {\n    // {type:'user/login'}\n    // {type:'user/logout'}\n    // {type:'cart/addCart'}\n    if(mutation.type === 'user/login') {\n      const user = JSON.stringify(state.user)\n      localStorage.setItem('user', user)\n    } else if (mutation.type === 'user/logout') {\n      localStorage.removeItem('user')\n    }\n    console.log(2)\n  })\n}"]}]}
{"remainingRequest":"/Users/ivy/Downloads/vue-preview/node_modules/babel-loader/lib/index.js!/Users/ivy/Downloads/vue-preview/node_modules/eslint-loader/index.js??ref--13-0!/Users/ivy/Downloads/vue-preview/src/router/index.js","dependencies":[{"path":"/Users/ivy/Downloads/vue-preview/src/router/index.js","mtime":1595822482000},{"path":"/Users/ivy/Downloads/vue-preview/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/ivy/Downloads/vue-preview/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/ivy/Downloads/vue-preview/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZVJvdXRlciBmcm9tICd2dWUtcm91dGVyJzsKaW1wb3J0IEhvbWUgZnJvbSAnLi4vdmlld3MvSG9tZS52dWUnOwppbXBvcnQgc3RvcmUgZnJvbSAnLi4vc3RvcmUnOwpWdWUudXNlKFZ1ZVJvdXRlcik7IC8vIOmFjee9rgoKdmFyIHJvdXRlcyA9IFt7CiAgcGF0aDogJy8nLAogIG5hbWU6ICdob21lJywKICBjb21wb25lbnQ6IEhvbWUKfSwgewogIHBhdGg6ICcvbG9naW4nLAogIG5hbWU6ICdsb2dpbicsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCcuLi92aWV3cy9Mb2dpbi52dWUnKTsKICB9Cn0sIHsKICBwYXRoOiAnL2NvdXJzZS86bmFtZScsCiAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICByZXR1cm4gaW1wb3J0KCcuLi92aWV3cy9EZXRhaWwudnVlJyk7CiAgfQp9LCB7CiAgLy8g5Lya5Yy56YWN5omA5pyJ6Lev5b6ECiAgcGF0aDogJyonLAogIGNvbXBvbmVudDogZnVuY3Rpb24gY29tcG9uZW50KCkgewogICAgcmV0dXJuIGltcG9ydCgnLi4vdmlld3MvNDA0LnZ1ZScpOwogIH0KfV07CnZhciByb3V0ZXIgPSBuZXcgVnVlUm91dGVyKHsKICBtb2RlOiAnaGlzdG9yeScsCiAgYmFzZTogcHJvY2Vzcy5lbnYuQkFTRV9VUkwsCiAgcm91dGVzOiByb3V0ZXMKfSk7IC8vIOWFqOWxgOWuiOWNqwovLyByb3V0ZXIuYmVmb3JlRWFjaCgodG8sIGZyb20sIG5leHQpID0+IHsKLy8gICAvLyDliKTmlq3ot6/nlLHmmK/lkKbpnIDopoHlrojljasKLy8gICAvLyBtZXRh5pWw5o2uCi8vICAgaWYgKHRvLm1ldGEuYXV0aCkgewovLyAgICAgLy8g5piv5ZCm55m75b2VCi8vICAgICBpZiAod2luZG93LmlzTG9naW4pIHsKLy8gICAgICAgbmV4dCgpCi8vICAgICB9IGVsc2UgewovLyAgICAgICBuZXh0KCcvbG9naW4/cmVkaXJlY3Q9Jyt0by5mdWxsUGF0aCkKLy8gICAgIH0KLy8gICB9IGVsc2UgewovLyAgICAgbmV4dCgpCi8vICAgfQovLyB9KQoKdmFyIGhhc0FkZEF1dGhSb3V0ZSA9IGZhbHNlOwpleHBvcnQgZnVuY3Rpb24gYWRkQXV0aFJvdXRlKCkgewogIGlmICghaGFzQWRkQXV0aFJvdXRlKSB7CiAgICAvLyDliqjmgIHmt7vliqDot6/nlLEKICAgIHJvdXRlci5hZGRSb3V0ZXMoW3sKICAgICAgcGF0aDogIi9hZG1pbiIsCiAgICAgIG5hbWU6ICJhZG1pbiIsCiAgICAgIC8vIHJvdXRlIGxldmVsIGNvZGUtc3BsaXR0aW5nCiAgICAgIC8vIHRoaXMgZ2VuZXJhdGVzIGEgc2VwYXJhdGUgY2h1bmsgKGFib3V0LltoYXNoXS5qcykgZm9yIHRoaXMgcm91dGUKICAgICAgLy8gd2hpY2ggaXMgbGF6eS1sb2FkZWQgd2hlbiB0aGUgcm91dGUgaXMgdmlzaXRlZC4KICAgICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgICAgcmV0dXJuIGltcG9ydCgKICAgICAgICAvKiB3ZWJwYWNrQ2h1bmtOYW1lOiAiYWJvdXQiICovCiAgICAgICAgIi4uL3ZpZXdzL0FkbWluLnZ1ZSIpOwogICAgICB9LAogICAgICBjaGlsZHJlbjogW3sKICAgICAgICBwYXRoOiAiL2FkbWluL2NvdXJzZS86bmFtZSIsCiAgICAgICAgbmFtZTogImRldGFpbCIsCiAgICAgICAgY29tcG9uZW50OiBmdW5jdGlvbiBjb21wb25lbnQoKSB7CiAgICAgICAgICByZXR1cm4gaW1wb3J0KCIuLi92aWV3cy9EZXRhaWwudnVlIik7CiAgICAgICAgfQogICAgICB9XQogICAgfV0pOwogICAgaGFzQWRkQXV0aFJvdXRlID0gdHJ1ZTsKICB9Cn0Kcm91dGVyLmJlZm9yZUVhY2goZnVuY3Rpb24gKHRvLCBmcm9tLCBuZXh0KSB7CiAgLy8g5Yik5pat6YC76L6R77yaCiAgaWYgKHN0b3JlLnN0YXRlLnVzZXIuaXNMb2dpbikgewogICAgLy8g5Y+v6IO95piv57yT5a2Y55m75b2V54q25oCB77yM5omn6KGM5LiA5LiL6Lev55Sx5re75YqgCiAgICBhZGRBdXRoUm91dGUoKTsgLy8g5bey55m75b2VCgogICAgaWYgKHRvLnBhdGggPT09ICcvbG9naW4nKSB7CiAgICAgIC8vIOW3sueZu+W9leayoeW/heimgeWOu+eZu+W9lemhte+8jOmHjeWumuWQkeiHs+mmlumhtQogICAgICBuZXh0KCcvJyk7CiAgICB9IGVsc2UgewogICAgICAvLyDljrvlhbbku5bpobXmlL7ooYwKICAgICAgbmV4dCgpOwogICAgfQogIH0gZWxzZSB7CiAgICAvLyDmsqHmnInnmbvlvZUKICAgIGlmICh0by5wYXRoID09PSAnL2xvZ2luJykgewogICAgICAvLyDopoHljrvnmbvlvZXpobXlsLHnm7TmjqXmlL7ooYwKICAgICAgbmV4dCgpOwogICAgfSBlbHNlIHsKICAgICAgLy8g5ZCm5YiZ6YeN5a6a5ZCR5Yiw55m75b2V6aG1CiAgICAgIG5leHQoJy9sb2dpbj9yZWRpcmVjdD0nICsgdG8uZnVsbFBhdGgpOwogICAgfQogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHJvdXRlcjs="},{"version":3,"sources":["/Users/ivy/Downloads/vue-preview/src/router/index.js"],"names":["Vue","VueRouter","Home","store","use","routes","path","name","component","router","mode","base","process","env","BASE_URL","hasAddAuthRoute","addAuthRoute","addRoutes","children","beforeEach","to","from","next","state","user","isLogin","fullPath"],"mappings":";AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AACA,OAAOC,IAAP,MAAiB,mBAAjB;AACA,OAAOC,KAAP,MAAkB,UAAlB;AAEAH,GAAG,CAACI,GAAJ,CAAQH,SAAR,E,CAEA;;AACA,IAAMI,MAAM,GAAG,CACb;AACEC,EAAAA,IAAI,EAAE,GADR;AAEEC,EAAAA,IAAI,EAAE,MAFR;AAGEC,EAAAA,SAAS,EAAEN;AAHb,CADa,EAMb;AACEI,EAAAA,IAAI,EAAE,QADR;AAEEC,EAAAA,IAAI,EAAE,OAFR;AAGEC,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,oBAAP,CAAN;AAAA;AAHb,CANa,EAWb;AACEF,EAAAA,IAAI,EAAE,eADR;AAEEE,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,qBAAP,CAAN;AAAA;AAFb,CAXa,EAeb;AACE;AACAF,EAAAA,IAAI,EAAE,GAFR;AAGEE,EAAAA,SAAS,EAAE;AAAA,WAAM,OAAO,kBAAP,CAAN;AAAA;AAHb,CAfa,CAAf;AAsBA,IAAMC,MAAM,GAAG,IAAIR,SAAJ,CAAc;AAC3BS,EAAAA,IAAI,EAAE,SADqB;AAE3BC,EAAAA,IAAI,EAAEC,OAAO,CAACC,GAAR,CAAYC,QAFS;AAG3BT,EAAAA,MAAM,EAANA;AAH2B,CAAd,CAAf,C,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIU,eAAe,GAAG,KAAtB;AAEA,OAAO,SAASC,YAAT,GAAwB;AAC7B,MAAI,CAACD,eAAL,EAAsB;AACpB;AACAN,IAAAA,MAAM,CAACQ,SAAP,CAAiB,CACf;AACEX,MAAAA,IAAI,EAAE,QADR;AAEEC,MAAAA,IAAI,EAAE,OAFR;AAGE;AACA;AACA;AACAC,MAAAA,SAAS,EAAE;AAAA,eACT;AAAO;AAAgC,4BAAvC,CADS;AAAA,OANb;AAQEU,MAAAA,QAAQ,EAAE,CACR;AACEZ,QAAAA,IAAI,EAAE,qBADR;AAEEC,QAAAA,IAAI,EAAE,QAFR;AAGEC,QAAAA,SAAS,EAAE;AAAA,iBAAM,OAAO,qBAAP,CAAN;AAAA;AAHb,OADQ;AARZ,KADe,CAAjB;AAkBAO,IAAAA,eAAe,GAAG,IAAlB;AACD;AAEF;AAEDN,MAAM,CAACU,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC;AACA,MAAInB,KAAK,CAACoB,KAAN,CAAYC,IAAZ,CAAiBC,OAArB,EAA8B;AAC5B;AACAT,IAAAA,YAAY,GAFgB,CAI5B;;AACA,QAAII,EAAE,CAACd,IAAH,KAAY,QAAhB,EAA0B;AACxB;AACAgB,MAAAA,IAAI,CAAC,GAAD,CAAJ;AACD,KAHD,MAGO;AACL;AACAA,MAAAA,IAAI;AACL;AACF,GAZD,MAYO;AACL;AACA,QAAIF,EAAE,CAACd,IAAH,KAAY,QAAhB,EAA0B;AACxB;AACAgB,MAAAA,IAAI;AACL,KAHD,MAGO;AACL;AACAA,MAAAA,IAAI,CAAC,qBAAqBF,EAAE,CAACM,QAAzB,CAAJ;AACD;AACF;AACF,CAxBD;AA0BA,eAAejB,MAAf","sourcesContent":["import Vue from 'vue'\nimport VueRouter from 'vue-router'\nimport Home from '../views/Home.vue'\nimport store from '../store'\n\nVue.use(VueRouter)\n\n// 配置\nconst routes = [\n  {\n    path: '/',\n    name: 'home',\n    component: Home\n  },\n  {\n    path: '/login',\n    name: 'login',\n    component: () => import('../views/Login.vue')\n  },\n  {\n    path: '/course/:name',\n    component: () => import('../views/Detail.vue')\n  },\n  {\n    // 会匹配所有路径\n    path: '*',\n    component: () => import('../views/404.vue')\n  }\n]\n\nconst router = new VueRouter({\n  mode: 'history',\n  base: process.env.BASE_URL,\n  routes\n})\n\n// 全局守卫\n// router.beforeEach((to, from, next) => {\n//   // 判断路由是否需要守卫\n//   // meta数据\n//   if (to.meta.auth) {\n//     // 是否登录\n//     if (window.isLogin) {\n//       next()\n//     } else {\n//       next('/login?redirect='+to.fullPath)\n//     }\n//   } else {\n//     next()\n//   }\n// })\n\nlet hasAddAuthRoute = false;\n\nexport function addAuthRoute() {\n  if (!hasAddAuthRoute) {\n    // 动态添加路由\n    router.addRoutes([\n      {\n        path: \"/admin\",\n        name: \"admin\",\n        // route level code-splitting\n        // this generates a separate chunk (about.[hash].js) for this route\n        // which is lazy-loaded when the route is visited.\n        component: () =>\n          import(/* webpackChunkName: \"about\" */ \"../views/Admin.vue\"),\n        children: [\n          {\n            path: \"/admin/course/:name\",\n            name: \"detail\",\n            component: () => import(\"../views/Detail.vue\")\n          }\n        ]\n      }\n    ]);\n    hasAddAuthRoute = true\n  }\n\n}\n\nrouter.beforeEach((to, from, next) => {\n  // 判断逻辑：\n  if (store.state.user.isLogin) {\n    // 可能是缓存登录状态，执行一下路由添加\n    addAuthRoute()\n\n    // 已登录\n    if (to.path === '/login') {\n      // 已登录没必要去登录页，重定向至首页\n      next('/')\n    } else {\n      // 去其他页放行\n      next()\n    }\n  } else {\n    // 没有登录\n    if (to.path === '/login') {\n      // 要去登录页就直接放行\n      next()\n    } else {\n      // 否则重定向到登录页\n      next('/login?redirect=' + to.fullPath)\n    }\n  }\n})\n\nexport default router\n"]}]}